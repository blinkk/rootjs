import fs from 'fs';
import path from 'path';
import {fileURLToPath} from 'url';

const __dirname = path.dirname(fileURLToPath(import.meta.url));

const jsonContent = fs.readFileSync(
  path.join(__dirname, '../../root/package.json'),
  'utf-8'
);
const data = JSON.parse(jsonContent);
const rootVersion = data.version;

const content = `// This file is autogenerated by update-root-version.mjs.
export const ROOT_VERSION = '${rootVersion}';
`;
const filepath = path.join(__dirname, '../src/root-version.ts');
fs.writeFileSync(filepath, content, 'utf-8');
console.log(`saved: ${filepath}`);
